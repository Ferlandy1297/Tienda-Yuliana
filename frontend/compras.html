<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Compras | Tienda</title>
  <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h2>Compras</h2>
      <div class="nav">
        <a class="pill" href="./dashboard.html">Dashboard</a>
        <a class="pill" href="./proveedores.html">Proveedores</a>
      </div>
      <div class="right hstack">
        <span class="tag">Rol: <span data-rol></span></span>
        <button id="btnLogout" class="btn btn-outline">Salir</button>
      </div>
    </div>

    <div class="panel">
      <h3>Nueva compra</h3>
      <div class="toolbar mb-2">
        <label>ID Proveedor</label>
        <input id="cIdProveedor" type="number" min="1" required>
        <label>Estado</label>
        <select id="cEstado"><option>ABIERTA</option><option>PAGADA</option></select>
        <button id="cAddItem" class="btn">Agregar Ã­tem</button>
        <button id="cRegistrar" class="btn btn-primary right">Registrar compra</button>
      </div>
      <div id="cItems" class="stack"></div>
      <div id="cFeedback" class="mt-2"></div>
    </div>

    <div class="panel">
      <div class="toolbar">
        <strong>Historial</strong>
        <label class="right">Inicio</label>
        <input id="inicio" type="date">
        <label>Fin</label>
        <input id="fin" type="date">
        <button id="btnBuscar" class="btn">Buscar</button>
      </div>
      <table class="table mt-2" id="tbl"><thead><tr><th>ID</th><th>Fecha</th><th>Estado</th><th>Total</th></tr></thead><tbody></tbody></table>
    </div>

    <div class="panel">
      <h3>Pagar compra</h3>
      <div class="hstack">
        <input id="pcIdCompra" type="number" min="1" placeholder="ID compra">
        <select id="pcMetodo"><option>EFECTIVO</option><option>TRANSFERENCIA</option></select>
        <input id="pcMonto" type="number" step="0.01" min="0" placeholder="Monto">
        <button id="btnPagarCompra" class="btn btn-primary">Registrar Pago</button>
      </div>
      <div id="pcFeedback" class="mt-2"></div>
    </div>
  </div>

  <template id="tplCItem">
    <div class="row">
      <div class="col"><label>ID Producto</label><input class="idProducto" type="number" min="1" required /></div>
      <div class="col"><label>Cantidad</label><input class="cantidad" type="number" min="1" value="1" required /></div>
      <div class="col"><label>Costo Unitario</label><input class="costoUnitario" type="number" step="0.01" min="0.01" required /></div>
      <div class="col"><label>Vence (opcional)</label><input class="fechaVencimiento" type="date" /></div>
      <div class="col" style="align-self:end;"><button class="btn btn-danger btn-del" type="button">Quitar</button></div>
    </div>
  </template>

  <script type="module" src="./js/compras.js"></script>
</body>
</html>
